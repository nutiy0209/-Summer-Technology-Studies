<!DOCTYPE html>
<html lang="en">
<head>
  <title>Todo List</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <h1>Todo List</h1>
  <form id="todoForm">
    <input type="text" id="todoInput" placeholder="Enter a new todo" required>
    <button type="submit">Add</button>
  </form>
  <ul id="todoList"></ul>

  <script>
    // 從伺服器獲取待辦事項並呈現在網頁上
    fetch('http://localhost:3000/',{
		headers: { 'Content-Type': 'application/json' }
	}).then(response => response.json())
      .then(todoList => {
        const todoListElement = document.getElementById('todoList');
        todoList.forEach(todo => {
          const li = document.createElement('li');
          li.textContent = todo;
          todoListElement.appendChild(li);
        });
      });

    // 提交待辦事項到伺服器
    document.getElementById('todoForm').addEventListener('submit', event => {
      event.preventDefault();
      const todoInput = document.getElementById('todoInput');
      const newTodo = todoInput.value;
      fetch('http://localhost:3000/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ todo: newTodo })
      })
        .then(response => response.text())
        .then(message => {
          console.log(message);
          // 清空輸入框並新增待辦事項到網頁上
          todoInput.value = '';
          const todoListElement = document.getElementById('todoList');
          const li = document.createElement('li');
          li.textContent = newTodo;
          todoListElement.appendChild(li);
        });
    });
  </script>
</body>
</html>